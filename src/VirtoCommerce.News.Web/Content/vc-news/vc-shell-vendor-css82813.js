import{E as z}from"./vc-shell-vendor-domutils82813.js";import{n as d}from"./vc-shell-vendor-boolbase82813.js";import{p as E}from"./vc-shell-vendor-nth82813.js";var u;(function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"})(u||(u={}));var m;(function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"})(m||(m={}));const U=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,Z=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,$=new Map([[126,m.Element],[94,m.Start],[36,m.End],[42,m.Any],[33,m.Not],[124,m.Hyphen]]),ee=new Set(["has","not","matches","is","where","host","host-context"]);function te(e){switch(e.type){case u.Adjacent:case u.Child:case u.Descendant:case u.Parent:case u.Sibling:case u.ColumnCombinator:return!0;default:return!1}}const ne=new Set(["contains","icontains"]);function re(e,n,t){const r=parseInt(n,16)-65536;return r!==r||t?n:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)}function A(e){return e.replace(Z,re)}function S(e){return e===39||e===34}function W(e){return e===32||e===9||e===10||e===12||e===13}function se(e){const n=[],t=I(n,`${e}`,0);if(t<e.length)throw new Error(`Unmatched selector: ${e.slice(t)}`);return n}function I(e,n,t){let r=[];function o(g){const f=n.slice(t+g).match(U);if(!f)throw new Error(`Expected name, found ${n.slice(t)}`);const[p]=f;return t+=g+p.length,A(p)}function s(g){for(t+=g;t<n.length&&W(n.charCodeAt(t));)t++}function l(){t+=1;const g=t;let f=1;for(;f>0&&t<n.length;t++)n.charCodeAt(t)===40&&!i(t)?f++:n.charCodeAt(t)===41&&!i(t)&&f--;if(f)throw new Error("Parenthesis not matched");return A(n.slice(g,t-1))}function i(g){let f=0;for(;n.charCodeAt(--g)===92;)f++;return(f&1)===1}function a(){if(r.length>0&&te(r[r.length-1]))throw new Error("Did not expect successive traversals.")}function c(g){if(r.length>0&&r[r.length-1].type===u.Descendant){r[r.length-1].type=g;return}a(),r.push({type:g})}function h(g,f){r.push({type:u.Attribute,name:g,action:f,value:o(1),namespace:null,ignoreCase:"quirks"})}function b(){if(r.length&&r[r.length-1].type===u.Descendant&&r.pop(),r.length===0)throw new Error("Empty sub-selector");e.push(r)}if(s(0),n.length===t)return t;e:for(;t<n.length;){const g=n.charCodeAt(t);switch(g){case 32:case 9:case 10:case 12:case 13:{(r.length===0||r[0].type!==u.Descendant)&&(a(),r.push({type:u.Descendant})),s(1);break}case 62:{c(u.Child),s(1);break}case 60:{c(u.Parent),s(1);break}case 126:{c(u.Sibling),s(1);break}case 43:{c(u.Adjacent),s(1);break}case 46:{h("class",m.Element);break}case 35:{h("id",m.Equals);break}case 91:{s(1);let f,p=null;n.charCodeAt(t)===124?f=o(1):n.startsWith("*|",t)?(p="*",f=o(2)):(f=o(0),n.charCodeAt(t)===124&&n.charCodeAt(t+1)!==61&&(p=f,f=o(1))),s(0);let y=m.Exists;const M=$.get(n.charCodeAt(t));if(M){if(y=M,n.charCodeAt(t+1)!==61)throw new Error("Expected `=`");s(2)}else n.charCodeAt(t)===61&&(y=m.Equals,s(1));let F="",x=null;if(y!=="exists"){if(S(n.charCodeAt(t))){const v=n.charCodeAt(t);let w=t+1;for(;w<n.length&&(n.charCodeAt(w)!==v||i(w));)w+=1;if(n.charCodeAt(w)!==v)throw new Error("Attribute value didn't end");F=A(n.slice(t+1,w)),t=w+1}else{const v=t;for(;t<n.length&&(!W(n.charCodeAt(t))&&n.charCodeAt(t)!==93||i(t));)t+=1;F=A(n.slice(v,t))}s(0);const j=n.charCodeAt(t)|32;j===115?(x=!1,s(1)):j===105&&(x=!0,s(1))}if(n.charCodeAt(t)!==93)throw new Error("Attribute selector didn't terminate");t+=1;const Y={type:u.Attribute,name:f,action:y,value:F,namespace:p,ignoreCase:x};r.push(Y);break}case 58:{if(n.charCodeAt(t+1)===58){r.push({type:u.PseudoElement,name:o(2).toLowerCase(),data:n.charCodeAt(t)===40?l():null});continue}const f=o(1).toLowerCase();let p=null;if(n.charCodeAt(t)===40)if(ee.has(f)){if(S(n.charCodeAt(t+1)))throw new Error(`Pseudo-selector ${f} cannot be quoted`);if(p=[],t=I(p,n,t+1),n.charCodeAt(t)!==41)throw new Error(`Missing closing parenthesis in :${f} (${n})`);t+=1}else{if(p=l(),ne.has(f)){const y=p.charCodeAt(0);y===p.charCodeAt(p.length-1)&&S(y)&&(p=p.slice(1,-1))}p=A(p)}r.push({type:u.Pseudo,name:f,data:p});break}case 44:{b(),r=[],s(1);break}default:{if(n.startsWith("/*",t)){const y=n.indexOf("*/",t+2);if(y<0)throw new Error("Comment was not terminated");t=y+2,r.length===0&&s(0);break}let f=null,p;if(g===42)t+=1,p="*";else if(g===124){if(p="",n.charCodeAt(t+1)===124){c(u.ColumnCombinator),s(2);break}}else if(U.test(n.slice(t)))p=o(0);else break e;n.charCodeAt(t)===124&&n.charCodeAt(t+1)!==124&&(f=p,n.charCodeAt(t+1)===42?(p="*",t+=2):p=o(1)),r.push(p==="*"?{type:u.Universal,namespace:f}:{type:u.Tag,name:p,namespace:f})}}}return b(),t}const _=new Map([[u.Universal,50],[u.Tag,30],[u.Attribute,1],[u.Pseudo,0]]);function D(e){return!_.has(e.type)}const oe=new Map([[m.Exists,10],[m.Equals,8],[m.Not,7],[m.Start,6],[m.End,6],[m.Any,5]]);function ae(e){const n=e.map(B);for(let t=1;t<e.length;t++){const r=n[t];if(!(r<0))for(let o=t-1;o>=0&&r<n[o];o--){const s=e[o+1];e[o+1]=e[o],e[o]=s,n[o+1]=n[o],n[o]=r}}}function B(e){var n,t;let r=(n=_.get(e.type))!==null&&n!==void 0?n:-1;return e.type===u.Attribute?(r=(t=oe.get(e.action))!==null&&t!==void 0?t:4,e.action===m.Equals&&e.name==="id"&&(r=9),e.ignoreCase&&(r>>=1)):e.type===u.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?r=0:Array.isArray(e.data)?(r=Math.min(...e.data.map(o=>Math.min(...o.map(B)))),r<0&&(r=0)):r=2:r=3),r}const ie=/[-[\]{}()*+?.,\\^$|#\s]/g;function R(e){return e.replace(ie,"\\$&")}const le=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function C(e,n){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!n.quirksMode:!n.xmlMode&&le.has(e.name)}const ue={equals(e,n,t){const{adapter:r}=t,{name:o}=n;let{value:s}=n;return C(n,t)?(s=s.toLowerCase(),l=>{const i=r.getAttributeValue(l,o);return i!=null&&i.length===s.length&&i.toLowerCase()===s&&e(l)}):l=>r.getAttributeValue(l,o)===s&&e(l)},hyphen(e,n,t){const{adapter:r}=t,{name:o}=n;let{value:s}=n;const l=s.length;return C(n,t)?(s=s.toLowerCase(),function(i){const a=r.getAttributeValue(i,o);return a!=null&&(a.length===l||a.charAt(l)==="-")&&a.substr(0,l).toLowerCase()===s&&e(i)}):function(i){const a=r.getAttributeValue(i,o);return a!=null&&(a.length===l||a.charAt(l)==="-")&&a.substr(0,l)===s&&e(i)}},element(e,n,t){const{adapter:r}=t,{name:o,value:s}=n;if(/\s/.test(s))return d.falseFunc;const l=new RegExp(`(?:^|\\s)${R(s)}(?:$|\\s)`,C(n,t)?"i":"");return function(i){const a=r.getAttributeValue(i,o);return a!=null&&a.length>=s.length&&l.test(a)&&e(i)}},exists(e,{name:n},{adapter:t}){return r=>t.hasAttrib(r,n)&&e(r)},start(e,n,t){const{adapter:r}=t,{name:o}=n;let{value:s}=n;const l=s.length;return l===0?d.falseFunc:C(n,t)?(s=s.toLowerCase(),i=>{const a=r.getAttributeValue(i,o);return a!=null&&a.length>=l&&a.substr(0,l).toLowerCase()===s&&e(i)}):i=>{var a;return!!(!((a=r.getAttributeValue(i,o))===null||a===void 0)&&a.startsWith(s))&&e(i)}},end(e,n,t){const{adapter:r}=t,{name:o}=n;let{value:s}=n;const l=-s.length;return l===0?d.falseFunc:C(n,t)?(s=s.toLowerCase(),i=>{var a;return((a=r.getAttributeValue(i,o))===null||a===void 0?void 0:a.substr(l).toLowerCase())===s&&e(i)}):i=>{var a;return!!(!((a=r.getAttributeValue(i,o))===null||a===void 0)&&a.endsWith(s))&&e(i)}},any(e,n,t){const{adapter:r}=t,{name:o,value:s}=n;if(s==="")return d.falseFunc;if(C(n,t)){const l=new RegExp(R(s),"i");return function(i){const a=r.getAttributeValue(i,o);return a!=null&&a.length>=s.length&&l.test(a)&&e(i)}}return l=>{var i;return!!(!((i=r.getAttributeValue(l,o))===null||i===void 0)&&i.includes(s))&&e(l)}},not(e,n,t){const{adapter:r}=t,{name:o}=n;let{value:s}=n;return s===""?l=>!!r.getAttributeValue(l,o)&&e(l):C(n,t)?(s=s.toLowerCase(),l=>{const i=r.getAttributeValue(l,o);return(i==null||i.length!==s.length||i.toLowerCase()!==s)&&e(l)}):l=>r.getAttributeValue(l,o)!==s&&e(l)}};function k(e,n){return t=>{const r=n.getParent(t);return r!=null&&n.isTag(r)&&e(t)}}const L={contains(e,n,{adapter:t}){return function(r){return e(r)&&t.getText(r).includes(n)}},icontains(e,n,{adapter:t}){const r=n.toLowerCase();return function(o){return e(o)&&t.getText(o).toLowerCase().includes(r)}},"nth-child"(e,n,{adapter:t,equals:r}){const o=E(n);return o===d.falseFunc?d.falseFunc:o===d.trueFunc?k(e,t):function(s){const l=t.getSiblings(s);let i=0;for(let a=0;a<l.length&&!r(s,l[a]);a++)t.isTag(l[a])&&i++;return o(i)&&e(s)}},"nth-last-child"(e,n,{adapter:t,equals:r}){const o=E(n);return o===d.falseFunc?d.falseFunc:o===d.trueFunc?k(e,t):function(s){const l=t.getSiblings(s);let i=0;for(let a=l.length-1;a>=0&&!r(s,l[a]);a--)t.isTag(l[a])&&i++;return o(i)&&e(s)}},"nth-of-type"(e,n,{adapter:t,equals:r}){const o=E(n);return o===d.falseFunc?d.falseFunc:o===d.trueFunc?k(e,t):function(s){const l=t.getSiblings(s);let i=0;for(let a=0;a<l.length;a++){const c=l[a];if(r(s,c))break;t.isTag(c)&&t.getName(c)===t.getName(s)&&i++}return o(i)&&e(s)}},"nth-last-of-type"(e,n,{adapter:t,equals:r}){const o=E(n);return o===d.falseFunc?d.falseFunc:o===d.trueFunc?k(e,t):function(s){const l=t.getSiblings(s);let i=0;for(let a=l.length-1;a>=0;a--){const c=l[a];if(r(s,c))break;t.isTag(c)&&t.getName(c)===t.getName(s)&&i++}return o(i)&&e(s)}},root(e,n,{adapter:t}){return r=>{const o=t.getParent(r);return(o==null||!t.isTag(o))&&e(r)}},scope(e,n,t,r){const{equals:o}=t;return!r||r.length===0?L.root(e,n,t):r.length===1?s=>o(r[0],s)&&e(s):s=>r.includes(s)&&e(s)},hover:q("isHovered"),visited:q("isVisited"),active:q("isActive")};function q(e){return function(n,t,{adapter:r}){const o=r[e];return typeof o!="function"?d.falseFunc:function(s){return o(s)&&n(s)}}}const H={empty(e,{adapter:n}){return!n.getChildren(e).some(t=>n.isTag(t)||n.getText(t)!=="")},"first-child"(e,{adapter:n,equals:t}){if(n.prevElementSibling)return n.prevElementSibling(e)==null;const r=n.getSiblings(e).find(o=>n.isTag(o));return r!=null&&t(e,r)},"last-child"(e,{adapter:n,equals:t}){const r=n.getSiblings(e);for(let o=r.length-1;o>=0;o--){if(t(e,r[o]))return!0;if(n.isTag(r[o]))break}return!1},"first-of-type"(e,{adapter:n,equals:t}){const r=n.getSiblings(e),o=n.getName(e);for(let s=0;s<r.length;s++){const l=r[s];if(t(e,l))return!0;if(n.isTag(l)&&n.getName(l)===o)break}return!1},"last-of-type"(e,{adapter:n,equals:t}){const r=n.getSiblings(e),o=n.getName(e);for(let s=r.length-1;s>=0;s--){const l=r[s];if(t(e,l))return!0;if(n.isTag(l)&&n.getName(l)===o)break}return!1},"only-of-type"(e,{adapter:n,equals:t}){const r=n.getName(e);return n.getSiblings(e).every(o=>t(e,o)||!n.isTag(o)||n.getName(o)!==r)},"only-child"(e,{adapter:n,equals:t}){return n.getSiblings(e).every(r=>t(e,r)||!n.isTag(r))}};function O(e,n,t,r){if(t===null){if(e.length>r)throw new Error(`Pseudo-class :${n} requires an argument`)}else if(e.length===r)throw new Error(`Pseudo-class :${n} doesn't have any arguments`)}const ce={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},G={};function de(e,n){return e===d.falseFunc?d.falseFunc:t=>n.isTag(t)&&e(t)}function J(e,n){const t=n.getSiblings(e);if(t.length<=1)return[];const r=t.indexOf(e);return r<0||r===t.length-1?[]:t.slice(r+1).filter(n.isTag)}function V(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const T=(e,n,t,r,o)=>{const s=o(n,V(t),r);return s===d.trueFunc?e:s===d.falseFunc?d.falseFunc:l=>s(l)&&e(l)},P={is:T,matches:T,where:T,not(e,n,t,r,o){const s=o(n,V(t),r);return s===d.falseFunc?e:s===d.trueFunc?d.falseFunc:l=>!s(l)&&e(l)},has(e,n,t,r,o){const{adapter:s}=t,l=V(t);l.relativeSelector=!0;const i=n.some(h=>h.some(D))?[G]:void 0,a=o(n,l,i);if(a===d.falseFunc)return d.falseFunc;const c=de(a,s);if(i&&a!==d.trueFunc){const{shouldTestNextSiblings:h=!1}=a;return b=>{if(!e(b))return!1;i[0]=b;const g=s.getChildren(b),f=h?[...g,...J(b,s)]:g;return s.existsOne(c,f)}}return h=>e(h)&&s.existsOne(c,s.getChildren(h))}};function fe(e,n,t,r,o){var s;const{name:l,data:i}=n;if(Array.isArray(i)){if(!(l in P))throw new Error(`Unknown pseudo-class :${l}(${i})`);return P[l](e,i,t,r,o)}const a=(s=t.pseudos)===null||s===void 0?void 0:s[l],c=typeof a=="string"?a:ce[l];if(typeof c=="string"){if(i!=null)throw new Error(`Pseudo ${l} doesn't have any arguments`);const h=se(c);return P.is(e,h,t,r,o)}if(typeof a=="function")return O(a,l,i,1),h=>a(h,i)&&e(h);if(l in L)return L[l](e,i,t,r);if(l in H){const h=H[l];return O(h,l,i,2),b=>h(b,t,i)&&e(b)}throw new Error(`Unknown pseudo-class :${l}`)}function N(e,n){const t=n.getParent(e);return t&&n.isTag(t)?t:null}function he(e,n,t,r,o){const{adapter:s,equals:l}=t;switch(n.type){case u.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case u.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case u.Attribute:{if(n.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!t.xmlMode||t.lowerCaseAttributeNames)&&(n.name=n.name.toLowerCase()),ue[n.action](e,n,t)}case u.Pseudo:return fe(e,n,t,r,o);case u.Tag:{if(n.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:i}=n;return(!t.xmlMode||t.lowerCaseTags)&&(i=i.toLowerCase()),function(a){return s.getName(a)===i&&e(a)}}case u.Descendant:{if(t.cacheResults===!1||typeof WeakSet>"u")return function(a){let c=a;for(;c=N(c,s);)if(e(c))return!0;return!1};const i=new WeakSet;return function(a){let c=a;for(;c=N(c,s);)if(!i.has(c)){if(s.isTag(c)&&e(c))return!0;i.add(c)}return!1}}case"_flexibleDescendant":return function(i){let a=i;do if(e(a))return!0;while(a=N(a,s));return!1};case u.Parent:return function(i){return s.getChildren(i).some(a=>s.isTag(a)&&e(a))};case u.Child:return function(i){const a=s.getParent(i);return a!=null&&s.isTag(a)&&e(a)};case u.Sibling:return function(i){const a=s.getSiblings(i);for(let c=0;c<a.length;c++){const h=a[c];if(l(i,h))break;if(s.isTag(h)&&e(h))return!0}return!1};case u.Adjacent:return s.prevElementSibling?function(i){const a=s.prevElementSibling(i);return a!=null&&e(a)}:function(i){const a=s.getSiblings(i);let c;for(let h=0;h<a.length;h++){const b=a[h];if(l(i,b))break;s.isTag(b)&&(c=b)}return!!c&&e(c)};case u.Universal:{if(n.namespace!=null&&n.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}function K(e){return e.type===u.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(n=>n.some(K)))}const pe={type:u.Descendant},ge={type:"_flexibleDescendant"},me={type:u.Pseudo,name:"scope",data:null};function be(e,{adapter:n},t){const r=!!t?.every(o=>{const s=n.isTag(o)&&n.getParent(o);return o===G||s&&n.isTag(s)});for(const o of e){if(!(o.length>0&&D(o[0])&&o[0].type!==u.Descendant))if(r&&!o.some(K))o.unshift(pe);else continue;o.unshift(me)}}function Q(e,n,t){var r;e.forEach(ae),t=(r=n.context)!==null&&r!==void 0?r:t;const o=Array.isArray(t),s=t&&(Array.isArray(t)?t:[t]);if(n.relativeSelector!==!1)be(e,n,s);else if(e.some(a=>a.length>0&&D(a[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let l=!1;const i=e.map(a=>{if(a.length>=2){const[c,h]=a;c.type!==u.Pseudo||c.name!=="scope"||(o&&h.type===u.Descendant?a[1]=ge:(h.type===u.Adjacent||h.type===u.Sibling)&&(l=!0))}return ye(a,n,s)}).reduce(we,d.falseFunc);return i.shouldTestNextSiblings=l,i}function ye(e,n,t){var r;return e.reduce((o,s)=>o===d.falseFunc?d.falseFunc:he(o,s,n,t,Q),(r=n.rootFunc)!==null&&r!==void 0?r:d.trueFunc)}function we(e,n){return n===d.falseFunc||e===d.trueFunc?e:e===d.falseFunc||n===d.trueFunc?n:function(t){return e(t)||n(t)}}const X=(e,n)=>e===n,Ce={adapter:z,equals:X};function Ae(e){var n,t,r,o;const s=e??Ce;return(n=s.adapter)!==null&&n!==void 0||(s.adapter=z),(t=s.equals)!==null&&t!==void 0||(s.equals=(o=(r=s.adapter)===null||r===void 0?void 0:r.equals)!==null&&o!==void 0?o:X),s}function ve(e){return function(n,t,r){const o=Ae(t);return e(n,o,r)}}const Se=ve(Q);function qe(e,n,t=!1){return t&&(e=Ee(e,n)),Array.isArray(e)?n.removeSubsets(e):n.getChildren(e)}function Ee(e,n){const t=Array.isArray(e)?e.slice(0):[e],r=t.length;for(let o=0;o<r;o++){const s=J(t[o],n);t.push(...s)}return t}export{se as L,te as j,qe as l,Se as o,u as s};
