import{y,_ as j}from"./vc-shell-vendor-microsoft93222.js";import{k as M}from"./app-vendor-vue-runtime-core93222.js";var k=Symbol("appInsights");function C(o){var n,s;const l=[o.appInsightsInstance,o.appInsightsConfig,o.connectionString].filter(r=>!!r).length;return l===0?!1:(l>1,!(o.appInsightsConfig&&!((n=o.appInsightsConfig.config)!=null&&n.connectionString)&&!((s=o.appInsightsConfig.config)!=null&&s.instrumentationKey)))}function X(o){var n;if(o.appInsightsInstance)return o.appInsightsInstance;const s=(n=o.appInsightsConfig)!=null?n:{config:{connectionString:o.connectionString}};return new y(s)}function Y(o,n){n.router&&(n.trackInitialPageView?E(o,n):n.router.isReady().then(()=>E(o,n)))}function x(o,n,s){if(s.trackAppErrors){const l=o.config.errorHandler;o.config.errorHandler=(r,v,d)=>{l&&l(r,v,d),n?.trackException({exception:r},{info:d})}}}function E(o,n){const s=n.appName?`[${n.appName}] `:"",l=r=>`${s}${r.name}`;n.router.beforeEach((r,v)=>{const d=l(r);o.context.telemetryTrace.traceID=j(),o.context.telemetryTrace.name=r.name,o.startTrackPage(d)}),n.router.afterEach(r=>{const v=l(r),d=location.protocol+"//"+location.host+r.fullPath;o.stopTrackPage(v,d)})}function H(o,n){(n.cloudRole||n.cloudRoleInstance)&&o.addTelemetryInitializer(s=>{s.tags!=null||(s.tags=[]),n.cloudRole&&(s.tags["ai.cloud.role"]=n.cloudRole),n.cloudRoleInstance&&(s.tags["ai.cloud.roleInstance"]=n.cloudRoleInstance)})}var D={install:(o,n)=>{if(!C(n))return;const s=X(n);o.config.globalProperties.$appInsights=s,o.provide(k,s),s.loadAppInsights(),Y(s,n),x(o,s,n),H(s,n),n.onLoaded&&n.onLoaded(s)}},A=()=>M(k);function S(o){return o.type.indexOf("mouse")!==-1?o.clientX:o.touches[0].clientX}function L(o){return o.type.indexOf("mouse")!==-1?o.clientY:o.touches[0].clientY}var P=function(){var o=!1;try{var n=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,n)}catch{}return o}(),q={install:function(o,n){var s=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",dragFrequency:100,rollOverFrequency:100,namespace:"touch"},n);function l(e){var t=this.$$touchObj,i=e.type.indexOf("touch")>=0,h=e.type.indexOf("mouse")>=0,p=this;i&&(t.lastTouchStartTime=e.timeStamp),!(h&&t.lastTouchStartTime&&e.timeStamp-t.lastTouchStartTime<350)&&(t.touchStarted||(O(this),t.touchStarted=!0,t.touchMoved=!1,t.swipeOutBounded=!1,t.startX=S(e),t.startY=L(e),t.currentX=0,t.currentY=0,t.touchStartTime=e.timeStamp,t.hasSwipe=f(this,"swipe")||f(this,"swipe.left")||f(this,"swipe.right")||f(this,"swipe.top")||f(this,"swipe.bottom"),f(this,"hold")&&(t.touchHoldTimer=setTimeout(function(){t.touchHoldTimer=null,m(e,p,"hold")},t.options.touchHoldTolerance)),m(e,this,"press")))}function r(e){var t=this.$$touchObj,i=S(e),h=L(e),p=t.currentX!=i||t.currentY!=h;if(t.currentX=i,t.currentY=h,t.touchMoved){if(t.hasSwipe&&!t.swipeOutBounded){var u=t.options.swipeTolerance;t.swipeOutBounded=Math.abs(t.startX-t.currentX)>u&&Math.abs(t.startY-t.currentY)>u}}else{var c=t.options.tapTolerance;t.touchMoved=Math.abs(t.startX-t.currentX)>c||Math.abs(t.startY-t.currentY)>c,t.touchMoved&&(b(t),m(e,this,"drag.once"))}if(f(this,"rollover")&&p){var a=e.timeStamp,g=t.options.rollOverFrequency;(t.touchRollTime==null||a>t.touchRollTime+g)&&(t.touchRollTime=a,m(e,this,"rollover"))}if(f(this,"drag")&&t.touchStarted&&t.touchMoved&&p){var a=e.timeStamp,g=t.options.dragFrequency;(t.touchDragTime==null||a>t.touchDragTime+g)&&(t.touchDragTime=a,m(e,this,"drag"))}}function v(){var e=this.$$touchObj;b(e),T(this),e.touchStarted=e.touchMoved=!1,e.startX=e.startY=0}function d(e){var t=this.$$touchObj,i=e.type.indexOf("touch")>=0,h=e.type.indexOf("mouse")>=0;i&&(t.lastTouchEndTime=e.timeStamp);var p=i&&!t.touchHoldTimer;if(b(t),t.touchStarted=!1,T(this),!(h&&t.lastTouchEndTime&&e.timeStamp-t.lastTouchEndTime<350))if(m(e,this,"release"),t.touchMoved){if(t.hasSwipe&&!t.swipeOutBounded){var u=t.options.swipeTolerance,c,a=Math.abs(t.startY-t.currentY),g=Math.abs(t.startX-t.currentX);(a>u||g>u)&&(a>g?c=t.startY>t.currentY?"top":"bottom":c=t.startX>t.currentX?"left":"right",f(this,"swipe."+c)?m(e,this,"swipe."+c,c):m(e,this,"swipe",c))}}else if(f(this,"longtap")&&e.timeStamp-t.touchStartTime>t.options.longTapTimeInterval)e.cancelable&&e.preventDefault(),m(e,this,"longtap");else if(f(this,"hold")&&p){e.cancelable&&e.preventDefault();return}else m(e,this,"tap")}function w(){O(this)}function I(){T(this)}function f(e,t){var i=e.$$touchObj.callbacks[t];return i!=null&&i.length>0}function m(e,t,i,h){var p=t.$$touchObj,u=p.callbacks[i];if(u==null||u.length===0)return null;for(var c=0;c<u.length;c++){var a=u[c];a.modifiers.stop&&e.stopPropagation(),a.modifiers.prevent&&e.preventDefault(),!(a.modifiers.self&&e.target!==e.currentTarget)&&typeof a.value=="function"&&(h?a.value(h,e):a.value(e))}}function O(e){var t=e.$$touchObj.options.touchClass;t&&e.classList.add(t)}function T(e){var t=e.$$touchObj.options.touchClass;t&&e.classList.remove(t)}function b(e){e&&e.touchHoldTimer&&(clearTimeout(e.touchHoldTimer),e.touchHoldTimer=null)}function $(e,t){var i=e.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:s};return t&&(i.options=Object.assign({},i.options,t)),e.$$touchObj=i,e.$$touchObj}o.directive(s.namespace,{beforeMount:function(e,t){var i=$(e),h=P?{passive:!0}:!1,p=t.arg||"tap";switch(p){case"swipe":var u=t.modifiers;if(u.left||u.right||u.top||u.bottom){for(var c in t.modifiers)if(["left","right","top","bottom"].indexOf(c)>=0){var a="swipe."+c;i.callbacks[a]=i.callbacks[a]||[],i.callbacks[a].push(t)}}else i.callbacks.swipe=i.callbacks.swipe||[],i.callbacks.swipe.push(t);break;case"press":case"drag":t.modifiers.disablePassive&&(h=!1);default:i.callbacks[p]=i.callbacks[p]||[],i.callbacks[p].push(t)}i.hasBindTouchEvents||(e.addEventListener("touchstart",l,h),e.addEventListener("touchmove",r,h),e.addEventListener("touchcancel",v),e.addEventListener("touchend",d),i.options.disableClick||(e.addEventListener("mousedown",l),e.addEventListener("mousemove",r),e.addEventListener("mouseup",d),e.addEventListener("mouseenter",w),e.addEventListener("mouseleave",I)),i.hasBindTouchEvents=!0)},unmounted:function(e){b(e.$$touchObj),e.removeEventListener("touchstart",l),e.removeEventListener("touchmove",r),e.removeEventListener("touchcancel",v),e.removeEventListener("touchend",d),e.$$touchObj&&!e.$$touchObj.options.disableClick&&(e.removeEventListener("mousedown",l),e.removeEventListener("mousemove",r),e.removeEventListener("mouseup",d),e.removeEventListener("mouseenter",w),e.removeEventListener("mouseleave",I)),delete e.$$touchObj}}),o.directive(`${s.namespace}-class`,{beforeMount:function(e,t){$(e,{touchClass:t.value})}}),o.directive(`${s.namespace}-options`,{beforeMount:function(e,t){$(e,t.value)}})}};export{D as P,A as T,q as k};
